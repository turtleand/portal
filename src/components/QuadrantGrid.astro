---
import DomainCard from "./DomainCard.astro";
import aiBackgroundAsset from "../images/ai.png";
import growthBackgroundAsset from "../images/growth.png";
import buildBackgroundAsset from "../images/build.png";
import blockchainBackgroundAsset from "../images/blockchain.png";
import type { CopyToken } from "../utils/i18n";

interface Props {
  labels: {
    ai: CopyToken;
    growth: CopyToken;
    build: CopyToken;
    blockchain: CopyToken;
  };
  taglines: {
    ai: CopyToken;
    growth: CopyToken;
    build: CopyToken;
    blockchain: CopyToken;
  };
}

const { labels, taglines }: Props = Astro.props;

const aiBackground = aiBackgroundAsset.src ?? aiBackgroundAsset;
const growthBackground = growthBackgroundAsset.src ?? growthBackgroundAsset;
const buildBackground = buildBackgroundAsset.src ?? buildBackgroundAsset;
const blockchainBackground =
  blockchainBackgroundAsset.src ?? blockchainBackgroundAsset;

const domains = [
  {
    labelCopy: labels.ai,
    emoji: "üß†",
    taglineCopy: taglines.ai,
    href: "https://lab.turtleand.com",
    variant: "ai",
    image: aiBackground,
  },
  {
    labelCopy: labels.growth,
    emoji: "üå±",
    taglineCopy: taglines.growth,
    href: "https://growth.turtleand.com",
    variant: "growth",
    image: growthBackground,
  },
  {
    labelCopy: labels.build,
    emoji: "‚öôÔ∏è",
    taglineCopy: taglines.build,
    href: "https://build.turtleand.com",
    variant: "build",
    image: buildBackground,
  },
  {
    labelCopy: labels.blockchain,
    emoji: "üîó",
    taglineCopy: taglines.blockchain,
    variant: "blockchain",
    image: blockchainBackground,
  },
];
---

<section id="quadrants" class="max-w-6xl mx-auto px-6 py-16">
  <div class="grid gap-6 md:grid-cols-2">
    {
      domains.map((domain, index) => (
        <DomainCard {...domain} delay={index * 120} />
      ))
    }
  </div>
</section>
<script is:inline>
  if (typeof window !== "undefined") {
    const markCachedImages = () => {
      document.querySelectorAll("[data-domain-card] img").forEach((image) => {
        if (image.complete && image.naturalWidth > 0) {
          const card = image.closest("[data-domain-card]");
          if (card) {
            card.setAttribute("data-image-ready", "true");
          }
        }
      });
    };

    // Run as soon as possible and once every resource finishes loading.
    markCachedImages();
    window.addEventListener("load", markCachedImages, { once: true });
  }
</script>
